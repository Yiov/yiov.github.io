import{_ as u}from"./vuepress-54-d505bb62.js";import{_ as r,r as c,o as d,c as v,a,w as p,b as s,d as n,e}from"./app-10972133.js";const k="/assets/vuepress-47-26bd8987.png",m="/assets/vuepress-48-ec11f391.png",b="/assets/vuepress-49-e3b78c25.png",h="/assets/vuepress-50-ca5234e1.png",g="/assets/vuepress-51-cbadbbb3.png",q="/assets/vuepress-52-d435f0e5.png",_="/assets/vuepress-53-933747aa.png",f="/assets/vuepress-55-72bf487c.png",y="/assets/vuepress-56-9255f098.png",x="/assets/vuepress-57-a1d5b640.png",A="/assets/vuepress-58-20c99766.png",I="/assets/vuepress-59-e86a3d4f.png",w="/assets/vuepress-60-5cd2d079.png",P="/assets/vuepress-61-04bb0ab4.png",E="/assets/vuepress-62-00d85c91.png",C="/assets/vuepress-63-92705f99.png",j="/assets/vuepress-64-ed0c0d86.png",D="/assets/vuepress-65-375bdf2f.png",N="/assets/vuepress-66-ab255480.png",O="/assets/vuepress-67-5fc0097c.png",K="/assets/vuepress-68-efe9f320.png",S="/assets/vuepress-69-8d166611.png",F="/assets/vuepress-70-2242a716.png",T="/assets/vuepress-71-cac3f0f8.png",G="/assets/vuepress-72-92ea40c7.png",B="/assets/vuepress-73-64c903f7.png",L="/assets/vuepress-74-9b384dee.png",Y="/assets/vuepress-75-81121059.png",$="/assets/vuepress-76-7ae20c69.png",R="/assets/vuepress-77-3afd7da9.png",V="/assets/vuepress-78-0abb0f33.png",z="/assets/vuepress-79-23034cc2.png",M="/assets/vuepress-80-f224bcf8.png",U="/assets/vuepress-81-575d7bb5.png",H="/assets/vuepress-82-84b6fa6a.png",X="/assets/vuepress-83-c8e32e0a.png",J="/assets/vuepress-84-12784c6a.png",Q="/assets/vuepress-85-517d4989.png",W="/assets/vuepress-86-b4a46c9d.png",l="/assets/vuepress-87-d235771a.png",Z="/assets/vuepress-88-e170d788.png",ss="/assets/vuepress-89-b982c2c3.png",ns="/assets/vuepress-90-9d30c105.png",as="/assets/vuepress-91-b8ea020a.png",ts="/assets/vuepress-92-af81820b.png",es="/assets/vuepress-93-c589cb72.png",ps="/assets/vuepress-94-374e4c12.png",os="/assets/vuepress-95-46132bea.png",cs="/assets/vuepress-96-434df944.png",is="/assets/vuepress-97-00901f0d.png",ls="/assets/vuepress-98-31bb6e91.png",us="/assets/vuepress-99-69519ea9.png",rs={},ds=e('<h1 id="docsearch" tabindex="-1"><a class="header-anchor" href="#docsearch" aria-hidden="true">#</a> DocSearch</h1><div class="custom-container warning"><p class="custom-container-title">更新时间</p><p>最近更新：2023-9-12</p><p>搭建版本：v2.0-beta.67</p></div><h2 id="安装" tabindex="-1"><a class="header-anchor" href="#安装" aria-hidden="true">#</a> 安装</h2><div class="custom-container tip"><p class="custom-container-title">说明</p><p>安装失败，挂个梯子就可以了</p></div>',4),vs=s("div",{class:"language-bash line-numbers-mode","data-ext":"sh"},[s("pre",{class:"language-bash"},[s("code",null,[s("span",{class:"token comment"},"#这里是pnpm 新增@algolia/client-search"),n(`
`),s("span",{class:"token function"},"pnpm"),n(),s("span",{class:"token function"},"add"),n(),s("span",{class:"token parameter variable"},"-D"),n(` @vuepress/plugin-docsearch@next @algolia/client-search search-insights
`)])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1),ks=s("div",{class:"language-bash line-numbers-mode","data-ext":"sh"},[s("pre",{class:"language-bash"},[s("code",null,[s("span",{class:"token comment"},"#这里是yarn 新增@algolia/client-search"),n(`
`),s("span",{class:"token function"},"yarn"),n(),s("span",{class:"token function"},"add"),n(),s("span",{class:"token parameter variable"},"-D"),n(` @vuepress/plugin-docsearch@next @algolia/client-search search-insights
`)])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1),ms=s("div",{class:"language-bash line-numbers-mode","data-ext":"sh"},[s("pre",{class:"language-bash"},[s("code",null,[s("span",{class:"token comment"},"#这里是npm 新增@algolia/client-search"),n(`
`),s("span",{class:"token function"},"npm"),n(" i "),s("span",{class:"token parameter variable"},"-D"),n(` @vuepress/plugin-docsearch@next @algolia/client-search search-insights
`)])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1),bs=e('<p><img src="'+k+`" alt=""></p><h2 id="配置" tabindex="-1"><a class="header-anchor" href="#配置" aria-hidden="true">#</a> 配置</h2><p>然后在ts里添加配置</p><div class="custom-container warning"><p class="custom-container-title">注意</p><p>appId / apiKey / indexName 这3个我们等会获取了再填入</p></div><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> docsearchPlugin <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@vuepress/plugin-docsearch&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token comment">//========docsearch配置========//</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token function">docsearchPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      appId<span class="token operator">:</span> <span class="token string">&#39;&lt;Application ID&gt;&#39;</span><span class="token punctuation">,</span>
      apiKey<span class="token operator">:</span> <span class="token string">&#39;&lt;Search-Only API Key&gt;&#39;</span><span class="token punctuation">,</span>
      indexName<span class="token operator">:</span> <span class="token string">&#39;&lt;INDEX_NAME&gt;&#39;</span><span class="token punctuation">,</span>
      locales<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string-property property">&#39;/&#39;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          placeholder<span class="token operator">:</span> <span class="token string">&#39;搜索文档&#39;</span><span class="token punctuation">,</span>
          translations<span class="token operator">:</span> <span class="token punctuation">{</span>
            button<span class="token operator">:</span> <span class="token punctuation">{</span>
              buttonText<span class="token operator">:</span> <span class="token string">&#39;搜索文档&#39;</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string-property property">&#39;/en/&#39;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          placeholder<span class="token operator">:</span> <span class="token string">&#39;Search Documentation&#39;</span><span class="token punctuation">,</span>
          translations<span class="token operator">:</span> <span class="token punctuation">{</span>
            button<span class="token operator">:</span> <span class="token punctuation">{</span>
              buttonText<span class="token operator">:</span> <span class="token string">&#39;Search Documentation&#39;</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="highlight-lines"><br><br><br><br><br><br><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>输出：</p><p><img src="`+m+'" alt=""></p><h2 id="使用" tabindex="-1"><a class="header-anchor" href="#使用" aria-hidden="true">#</a> 使用</h2><p>为了获取 <code>appId</code> / <code>apiKey</code> / <code>indexName</code></p><p>在注册账号前，请先确定自己使用 <a href="#%E8%87%AA%E8%A1%8C%E7%94%B3%E8%AF%B7">自行申请</a> 还是 <a href="#%E8%87%AA%E8%A1%8C%E7%88%AC%E5%8F%96">自行爬取</a></p><div class="custom-container tip"><p class="custom-container-title">区别</p><p>自行申请：可使用algolia官方的爬虫，但是需要提交公开仓库代码链接</p><p>自行爬取：需有一定动手能力，自行搭建爬虫，不需要提交仓库代码链接</p></div><h2 id="自行申请" tabindex="-1"><a class="header-anchor" href="#自行申请" aria-hidden="true">#</a> 自行申请</h2><h3 id="提交申请" tabindex="-1"><a class="header-anchor" href="#提交申请" aria-hidden="true">#</a> 提交申请</h3>',13),hs={href:"https://docsearch.algolia.com/",target:"_blank",rel:"noopener noreferrer"},gs=e('<p>点 <code>Apply</code> 申请，填入你的网址/邮箱/仓库链接即可</p><p><img src="'+b+'" alt=""></p><p><img src="'+h+'" alt=""></p><div class="custom-container tip"><p class="custom-container-title">说明</p><p>我点了2次都没有跳转，最后挂了个梯子可以了</p></div><p><img src="'+g+'" alt=""></p><h3 id="邀请注册" tabindex="-1"><a class="header-anchor" href="#邀请注册" aria-hidden="true">#</a> 邀请注册</h3><p>等待6-7小时，邮件发送过来</p><p>没有注册过的会给我们一个邀请链接，打开并注册账号</p><div class="custom-container warning"><p class="custom-container-title">注意</p><p>这里的appid、indexname我们可以填入 <code>config.ts</code></p><p>但是 apikey 这个没用，需要 <code>Search-Only API Key</code> 我们一会再填</p></div><p><img src="'+q+'" alt=""></p>',10),qs={href:"https://www.algolia.com/",target:"_blank",rel:"noopener noreferrer"},_s=s("code",null,"Search",-1),fs=s("code",null,"index",-1),ys=e('<p>由于官方已经帮我们创建了 <code>Application</code> ，我们直接点接受即可</p><div class="custom-container tip"><p class="custom-container-title">说明</p><p>没有弹按钮的，去邮箱复制邀请链接打开就有了</p></div><p><img src="'+_+'" alt=""></p><p><img src="'+u+'" alt=""></p><h3 id="爬取数据" tabindex="-1"><a class="header-anchor" href="#爬取数据" aria-hidden="true">#</a> 爬取数据</h3><p>问题来了，这里的索引 <code>records</code> 值为0，没有数据，爬取数据有问题</p><div class="custom-container tip"><p class="custom-container-title">说明</p><p>点刷新看看，我点了也没有用</p></div><p><img src="'+f+'" alt=""></p>',8),xs={href:"https://crawler.algolia.com/",target:"_blank",rel:"noopener noreferrer"},As=e('<p>再点击官方帮我们申请的Application</p><p><img src="'+y+'" alt=""></p><p>点 <code>Overview</code> 进来后发现爬虫数据有的，但是Records没有值，说明数据逻辑有问题</p><p><img src="'+x+'" alt=""></p><p>点 <code>Editor</code> 进来发现了问题，这里多了一个 <code>/doc</code></p><div class="custom-container warning"><p class="custom-container-title">注意</p><p>除了指定位置，其他不要乱改，特别是apikey不要改！和你申请的apikey不是同一个用途</p><p>如果你网址有别名解析或者重定向了，就不能用了，只能用你申请时的网址</p></div><p><img src="'+A+'" alt=""></p><p>改过之后点 <code>Runtest</code> 测试一下，records还是没有值</p><p>原来是class标签不对，用审查元素看了下page也的class是 theme-default-content</p><p><img src="'+I+'" alt=""></p><p>那我们将原来的 <code>.content_default</code> 全部替换成 <code>.theme-default-content</code> 即可</p><p><img src="'+w+'" alt=""></p><p>再次 <code>Run test</code>，可以在 Search Preview 里可以搜素看看</p><p><img src="'+P+'" alt=""></p><p>没问题了点保存，再重新在Overview重新爬取，Records有值就代表OK了</p><p><img src="'+E+'" alt=""></p><p>点击index回到algolia，看数据是否同步过来</p><p><img src="'+C+'" alt=""></p><p>最后，回到主页查看API KEYS，这里我们将 <code>Search API Key</code> 填入 <code>config.ts</code></p><p><img src="'+j+'" alt=""></p><p><img src="'+D+'" alt=""></p><h3 id="搜索测试" tabindex="-1"><a class="header-anchor" href="#搜索测试" aria-hidden="true">#</a> 搜索测试</h3><p>本地搜索一下，可以使用了</p>',23),Is={class:"custom-container tip"},ws=s("p",{class:"custom-container-title"},"说明",-1),Ps={href:"https://v2.vuepress.vuejs.org/zh/reference/plugin/docsearch.html#%E8%8E%B7%E5%8F%96%E6%90%9C%E7%B4%A2%E7%B4%A2%E5%BC%95",target:"_blank",rel:"noopener noreferrer"},Es=s("p",null,"免费的东西自然是费脑筋",-1),Cs=e('<p><img src="'+N+'" alt=""></p><h2 id="自行爬取" tabindex="-1"><a class="header-anchor" href="#自行爬取" aria-hidden="true">#</a> 自行爬取</h2><p>有点耐心看，我都一步步截图了</p><h3 id="注册账号" tabindex="-1"><a class="header-anchor" href="#注册账号" aria-hidden="true">#</a> 注册账号</h3>',4),js={href:"https://www.algolia.com/",target:"_blank",rel:"noopener noreferrer"},Ds=e('<div class="custom-container tip"><p class="custom-container-title">说明</p><p>也可以只用github关联登录注册</p></div><p><img src="'+O+'" alt=""></p><h3 id="创建应用" tabindex="-1"><a class="header-anchor" href="#创建应用" aria-hidden="true">#</a> 创建应用</h3><p>注册好后，我们在设置里新建一个Application</p><div class="custom-container tip"><p class="custom-container-title">说明</p><p>系统会默认给我们建一个，也是可以用的</p></div><p>创建一个新的应用程序 Applications - Create Application</p><p><img src="'+K+'" alt=""></p><p><img src="'+S+'" alt=""></p><p><img src="'+F+'" alt=""></p><p>名称随便，选择 <code>Free</code> 免费的方案，下一步</p><div class="custom-container tip"><p class="custom-container-title">说明</p><p>爬虫每月1万次，足够用了</p></div><p><img src="'+T+'" alt=""></p><p>这里只能选择默认了，香港这些数据中心都不能选择</p><div class="custom-container tip"><p class="custom-container-title">说明</p><p>香港的只能通过申请，官方给你配，不过即便是美国实测搜索也慢不了多少</p></div><p><img src="'+G+'" alt=""></p><p>勾选同意，创建即可</p><p><img src="'+B+'" alt=""></p><p>这样就完成了</p><p><img src="'+L+'" alt=""></p><h3 id="创建索引" tabindex="-1"><a class="header-anchor" href="#创建索引" aria-hidden="true">#</a> 创建索引</h3><p>右下角选择 Date Sources - Indices - Create Index</p><p><img src="'+Y+'" alt=""></p><p>这个就是我们的索引名，即 indexName ，后面会用到</p><p><img src="'+$+'" alt=""></p><p>接下来就是准备好我们的API，上面选择创建的Application</p><p>选择 <code>API keys</code></p><div class="custom-container tip"><p class="custom-container-title">说明</p><p>Application ID：应用ID</p><p>Search-Only API Key：搜索API</p><p>Admin API Key：管理API</p><p>indexName：索引名</p></div><p><img src="'+R+'" alt=""></p><p><img src="'+V+'" alt=""></p><p>最后就是爬取数据了，二选一</p><div class="custom-container tip"><p class="custom-container-title">说明</p><p>我就是被这个整崩溃了，爬取的索引就是用不了，累计耗时半个月，才搞清里面的逻辑</p></div><h3 id="docker爬取数据" tabindex="-1"><a class="header-anchor" href="#docker爬取数据" aria-hidden="true">#</a> Docker爬取数据</h3><div class="custom-container warning"><p class="custom-container-title">选其一</p><p>这个和 <a href="#github-actions%E7%88%AC%E5%8F%96%E6%95%B0%E6%8D%AE">Github Actions爬取数据</a> 任选其一</p></div>',33),Ns={href:"https://yiov.top/website/VMware",target:"_blank",rel:"noopener noreferrer"},Os={href:"https://yiov.top/website/docker",target:"_blank",rel:"noopener noreferrer"},Ks={href:"https://yiov.top/website/BT",target:"_blank",rel:"noopener noreferrer"},Ss=s("code",null,"root",-1),Fs=e('<p>新建一个 <code>docsearch</code> 目录</p><div class="custom-container tip"><p class="custom-container-title">说明</p><p>名字随便，只要自己记得住就行</p></div><p><img src="'+z+`" alt=""></p><p>新建一个 <code>.env</code> 环境变量文件，并填入相应值</p><div class="language-env line-numbers-mode" data-ext="env"><pre class="language-env"><code>APPLICATION_ID=你的Application ID
API_KEY=你的Admin API Key(非Search)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+M+'" alt=""></p>',6),Ts={href:"https://repology.org/project/jq/versions",target:"_blank",rel:"noopener noreferrer"},Gs=e(`<div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">#安装jq</span>
yum <span class="token function">install</span> jq <span class="token parameter variable">-y</span>

<span class="token comment">#版本查询</span>
jq <span class="token parameter variable">--version</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+U+'" alt=""></p><p>在docsearch目录里新建 <code>config.json</code> 文件，用于爬虫的配置，根据提示修改好自己的链接</p>',3),Bs={class:"custom-container tip"},Ls=s("p",{class:"custom-container-title"},"说明",-1),Ys=s("p",null,"当时就是卡在这里了，网上的版本尝试了无数次都不行",-1),$s={href:"https://docsearch.algolia.com/docs/legacy/run-your-own/",target:"_blank",rel:"noopener noreferrer"},Rs=s("p",null,[n("最后审查元素发现，有个facetFliter里有个lang， 同时vuepress官方也指出 "),s("code",null,"attributesForFaceting"),n(" 必须包含 "),s("code",null,"lang"),n(" 否则无法使用")],-1),Vs=e('<p><img src="'+H+`" alt=""></p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;index_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;你的索引名&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;start_urls&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;https://你的网址.com/&quot;</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;stop_urls&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;selectors&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;lvl0&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;selector&quot;</span><span class="token operator">:</span> <span class="token string">&quot;.sidebar-heading.active&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;global&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token property">&quot;default_value&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Documentation&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;lvl1&quot;</span><span class="token operator">:</span> <span class="token string">&quot;.theme-default-content h1&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;lvl2&quot;</span><span class="token operator">:</span> <span class="token string">&quot;.theme-default-content h2&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;lvl3&quot;</span><span class="token operator">:</span> <span class="token string">&quot;.theme-default-content h3&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;lvl4&quot;</span><span class="token operator">:</span> <span class="token string">&quot;.theme-default-content h4&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;lvl5&quot;</span><span class="token operator">:</span> <span class="token string">&quot;.theme-default-content h5&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;.theme-default-content p, .theme-default-content li&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;lang&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;selector&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/html/@lang&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;xpath&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;global&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;custom_settings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;attributesForFaceting&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">&quot;lang&quot;</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="highlight-lines"><br><div class="highlight-line"> </div><br><div class="highlight-line"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>只需要修改 <code>index_name</code> 和 <code>startUrls</code> 其余选项可保持默认</p><div class="custom-container tip"><p class="custom-container-title">说明</p><p><code>stop_urls</code> 表示的是爬虫不爬取的链接</p><p>因为我的vuepress单独做了索引，不需要就屏蔽掉了</p></div><p><img src="`+X+'" alt=""></p><p>至此我们的前期工作就准备好了，开始爬数据</p><p><img src="'+J+'" alt=""></p><p>现在我们拉取镜像并运行爬虫</p><div class="custom-container tip"><p class="custom-container-title">说明</p><p>格式：docker run -it --env-file=<code>你的env路径</code> -e &quot;CONFIG=$(cat <code>你的配置json路径</code> | jq -r tostring)&quot; algolia/docsearch-scraper`</p><p>比如我，都放在了root目录里的docsearch文件夹里，自己按需修改文件路径</p></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">-it</span> --env-file<span class="token operator">=</span>/root/docsearch/.env <span class="token parameter variable">-e</span> <span class="token string">&quot;CONFIG=<span class="token variable"><span class="token variable">$(</span><span class="token function">cat</span> /root/docsearch/config.json <span class="token operator">|</span> jq <span class="token parameter variable">-r</span> tostring<span class="token variable">)</span></span>&quot;</span> algolia/docsearch-scraper\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="'+Q+'" alt=""></p><p>回到Algolia看到数据已经有了</p><div class="custom-container warning"><p class="custom-container-title">注意</p><p>这里成功了会有个 <code>lang：zh_CN</code>，否则有数据也用不了</p></div><p><img src="'+W+'" alt=""></p><p>在 <code>config.ts</code> 填上数据后，搜索一次看下成果</p><p><img src="'+l+'" alt=""></p><h3 id="github-actions爬取数据" tabindex="-1"><a class="header-anchor" href="#github-actions爬取数据" aria-hidden="true">#</a> Github Actions爬取数据</h3><div class="custom-container warning"><p class="custom-container-title">推荐</p><p>这个和 <a href="#docker%E7%88%AC%E5%8F%96%E6%95%B0%E6%8D%AE">Docker爬取数据</a> 任选其一，推荐此方式</p></div><p>我们先创建一个工作流</p><div class="custom-container tip"><p class="custom-container-title">说明</p><p>我因为已经有一个了，我直接新建一个就行</p></div><p><img src="'+Z+'" alt=""></p><p><img src="'+ss+'" alt=""></p><p>命名为<code>docsearch.yml</code> ，复制粘贴下面的工作流代码，提交</p><p><img src="'+ns+'" alt=""></p>',24),zs=s("div",{class:"language-yaml line-numbers-mode","data-ext":"yml"},[s("pre",{class:"language-yaml"},[s("code",null,[s("span",{class:"token key atrule"},"on"),s("span",{class:"token punctuation"},":"),n(` deployment
`)])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"})])],-1),Ms=s("div",{class:"language-yaml line-numbers-mode","data-ext":"yml"},[s("pre",{class:"language-yaml"},[s("code",null,[s("span",{class:"token key atrule"},"on"),s("span",{class:"token punctuation"},":"),n(`
  `),s("span",{class:"token key atrule"},"push"),s("span",{class:"token punctuation"},":"),n(`
    `),s("span",{class:"token key atrule"},"branches"),s("span",{class:"token punctuation"},":"),n(`
      `),s("span",{class:"token punctuation"},"-"),n(` main
`)])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1),Us=s("div",{class:"language-yaml line-numbers-mode","data-ext":"yml"},[s("pre",{class:"language-yaml"},[s("code",null,[s("span",{class:"token key atrule"},"on"),s("span",{class:"token punctuation"},":"),n(`
  `),s("span",{class:"token key atrule"},"schedule"),s("span",{class:"token punctuation"},":"),n(`
    `),s("span",{class:"token comment"},"# 约每天早上8点触发（UTC时间0点）"),n(`
    `),s("span",{class:"token punctuation"},"-"),n(),s("span",{class:"token key atrule"},"cron"),s("span",{class:"token punctuation"},":"),n(),s("span",{class:"token string"},"'0 0 * * *'"),n(`
`)])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1),Hs=s("div",{class:"language-yaml line-numbers-mode","data-ext":"yml"},[s("pre",{class:"language-yaml"},[s("code",null,[s("span",{class:"token key atrule"},"on"),s("span",{class:"token punctuation"},":"),n(`
  `),s("span",{class:"token key atrule"},"workflow_dispatch"),s("span",{class:"token punctuation"},":"),n(`
`)])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1),Xs=e(`<div class="custom-container warning"><p class="custom-container-title">注意</p><p>这里触发的条件自己选，改代码高亮的位置就行，其他不要动</p></div><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token comment"># 名字可以自己取</span>
<span class="token key atrule">name</span><span class="token punctuation">:</span> docsearch

<span class="token comment"># 提交main分支触发部署</span>
<span class="token key atrule">on</span><span class="token punctuation">:</span>
  <span class="token key atrule">push</span><span class="token punctuation">:</span>
    <span class="token key atrule">branches</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> main

<span class="token key atrule">jobs</span><span class="token punctuation">:</span>
  <span class="token key atrule">algolia</span><span class="token punctuation">:</span>
    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest
    <span class="token key atrule">steps</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/checkout@v2

      <span class="token comment"># 一会要建docsearch.json文件</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Get the content of docsearch.json as config
        <span class="token key atrule">id</span><span class="token punctuation">:</span> algolia_config
        <span class="token key atrule">run</span><span class="token punctuation">:</span> echo &quot;<span class="token punctuation">:</span><span class="token punctuation">:</span>set<span class="token punctuation">-</span>output name=config<span class="token punctuation">:</span><span class="token punctuation">:</span>$(cat docsearch.json <span class="token punctuation">|</span> jq <span class="token punctuation">-</span>r tostring)&quot;

      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Run algolia/docsearch<span class="token punctuation">-</span>scraper image
        <span class="token comment"># 环境变量 ，在仓库设置-安全里添加秘钥</span>
        <span class="token comment"># APPLICATION_ID 是 algoia 的 APPLICATION ID</span>
        <span class="token comment"># API_KEY 是 algolia 的 Admin API KEY</span>
        <span class="token comment"># CONFIG默认即可，无需更改</span>
        <span class="token key atrule">env</span><span class="token punctuation">:</span>
          <span class="token key atrule">APPLICATION_ID</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.APPLICATION_ID <span class="token punctuation">}</span><span class="token punctuation">}</span>
          <span class="token key atrule">API_KEY</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.API_KEY <span class="token punctuation">}</span><span class="token punctuation">}</span>
          <span class="token key atrule">CONFIG</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> steps.algolia_config.outputs.config <span class="token punctuation">}</span><span class="token punctuation">}</span>
        <span class="token key atrule">run</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
          docker run \\
            --env APPLICATION_ID=\${APPLICATION_ID} \\
            --env API_KEY=\${API_KEY} \\
            --env &quot;CONFIG=\${CONFIG}&quot; \\
            algolia/docsearch-scraper</span>

</code></pre><div class="highlight-lines"><br><br><br><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+as+'" alt=""></p><p>然后在根目录新建一个 <code>docsearch.json</code> 文件，复制粘贴并提交</p><div class="custom-container tip"><p class="custom-container-title">说明</p><p>记得把索引和网址都改成自己的</p></div><p><img src="'+ts+`" alt=""></p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;index_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;你的索引名&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;start_urls&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;https://你的网址.com/&quot;</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;stop_urls&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;selectors&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;lvl0&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;selector&quot;</span><span class="token operator">:</span> <span class="token string">&quot;.sidebar-heading.active&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;global&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token property">&quot;default_value&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Documentation&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;lvl1&quot;</span><span class="token operator">:</span> <span class="token string">&quot;.theme-default-content h1&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;lvl2&quot;</span><span class="token operator">:</span> <span class="token string">&quot;.theme-default-content h2&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;lvl3&quot;</span><span class="token operator">:</span> <span class="token string">&quot;.theme-default-content h3&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;lvl4&quot;</span><span class="token operator">:</span> <span class="token string">&quot;.theme-default-content h4&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;lvl5&quot;</span><span class="token operator">:</span> <span class="token string">&quot;.theme-default-content h5&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;.theme-default-content p, .theme-default-content li&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;lang&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;selector&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/html/@lang&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;xpath&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;global&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;custom_settings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;attributesForFaceting&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">&quot;lang&quot;</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="highlight-lines"><br><div class="highlight-line"> </div><br><div class="highlight-line"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+es+'" alt=""></p><p><img src="'+ps+'" alt=""></p><p>然后再在仓库 - 设置 - Secrets and variables - actions，新增仓库秘钥</p><p><img src="'+os+'" alt=""></p><p>分别添加 <code>APPLICATION_ID</code> 和 <code>API_KEY</code></p>',12),Js={class:"custom-container warning"},Qs=s("p",{class:"custom-container-title"},"注意",-1),Ws={href:"https://www.algolia.com/",target:"_blank",rel:"noopener noreferrer"},Zs=s("code",null,"APPLICATION ID",-1),sn={href:"https://www.algolia.com/",target:"_blank",rel:"noopener noreferrer"},nn=s("code",null,"Admin API Key",-1),an=s("p",null,"千万不要填错了",-1),tn=e('<p><img src="'+cs+'" alt=""></p><p><img src="'+is+'" alt=""></p><p>我们提交一次代码，等工作流跑完，我们试试搜索结果</p><p><img src="'+ls+'" alt=""></p><p><img src="'+l+'" alt=""></p><h2 id="索引美化" tabindex="-1"><a class="header-anchor" href="#索引美化" aria-hidden="true">#</a> 索引美化</h2><p>这是官网原文档的索引，有明显的分类，很美观</p><p><img src="'+us+'" alt=""></p><p>折腾了半天发现，并没有解决</p>',9),en={href:"https://www.howtocode.io/posts/algolia/how-to-setup-algolia-doc-search#doc-search-config",target:"_blank",rel:"noopener noreferrer"},pn=e(`<details class="custom-container details"><summary>初步尝试 失败</summary><p>我们将在原本的 <code>start_urls</code> 和 <code>selectors</code> 里变更</p><p>这里我们添加一个选择词 <code>selectors_key</code> 和标签</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token comment">/* 原来的
&quot;start_urls&quot;: [
  &quot;https://yiov.github.io/&quot;
],
*/</span>
<span class="token comment">//现在的，使用的时候删掉这段注释</span>
<span class="token property">&quot;start_urls&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;https://yiov.github.io/&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://yiov.github.io/gfw&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;selectors_key&quot;</span><span class="token operator">:</span> <span class="token string">&quot;gfw&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;tags&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;gfw&quot;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>然后创建一个相对应的选择对象，并将 <code>selector</code> 留空， <code>default_value</code> 为搜索结果的标题</p><div class="custom-container warning"><p class="custom-container-title">注意</p><p>这里除了我创建的 <code>gfw</code> ，还有个 <code>default</code> ，是默认的必须要带，是搜索除了gfw以外的所有对象</p></div><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token comment">/* 原来的
&quot;selectors&quot;: {
    &quot;lvl0&quot;: {
      &quot;selector&quot;: &quot;.sidebar-heading.active&quot;,
      &quot;global&quot;: true,
      &quot;default_value&quot;: &quot;Documentation&quot;
    },
    &quot;lvl1&quot;: &quot;.theme-default-content h1&quot;,
    &quot;lvl2&quot;: &quot;.theme-default-content h2&quot;,
    &quot;lvl3&quot;: &quot;.theme-default-content h3&quot;,
    &quot;lvl4&quot;: &quot;.theme-default-content h4&quot;,
    &quot;lvl5&quot;: &quot;.theme-default-content h5&quot;,
    &quot;text&quot;: &quot;.theme-default-content p, .theme-default-content li&quot;,
    &quot;lang&quot;: {
      &quot;selector&quot;: &quot;/html/@lang&quot;,
      &quot;type&quot;: &quot;xpath&quot;,
      &quot;global&quot;: true
    }
  },
*/</span>
<span class="token comment">//现在的，使用的时候删掉这段注释</span>
<span class="token property">&quot;selectors&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;gfw&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;lvl0&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;selector&quot;</span><span class="token operator">:</span> <span class="token string">&quot;  &quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;global&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token property">&quot;default_value&quot;</span><span class="token operator">:</span> <span class="token string">&quot;科学上网&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;lvl1&quot;</span><span class="token operator">:</span> <span class="token string">&quot;.theme-default-content h1&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;lvl2&quot;</span><span class="token operator">:</span> <span class="token string">&quot;.theme-default-content h2&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;lvl3&quot;</span><span class="token operator">:</span> <span class="token string">&quot;.theme-default-content h3&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;lvl4&quot;</span><span class="token operator">:</span> <span class="token string">&quot;.theme-default-content h4&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;lvl5&quot;</span><span class="token operator">:</span> <span class="token string">&quot;.theme-default-content h5&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;.theme-default-content p, .theme-default-content li&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;default&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;lvl0&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;selector&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;global&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token property">&quot;default_value&quot;</span><span class="token operator">:</span> <span class="token string">&quot;文档&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;lvl1&quot;</span><span class="token operator">:</span> <span class="token string">&quot;.theme-default-content h1&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;lvl2&quot;</span><span class="token operator">:</span> <span class="token string">&quot;.theme-default-content h2&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;lvl3&quot;</span><span class="token operator">:</span> <span class="token string">&quot;.theme-default-content h3&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;lvl4&quot;</span><span class="token operator">:</span> <span class="token string">&quot;.theme-default-content h4&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;lvl5&quot;</span><span class="token operator">:</span> <span class="token string">&quot;.theme-default-content h5&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;.theme-default-content p, .theme-default-content li&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;lang&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;selector&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/html/@lang&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;xpath&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;global&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><h2 id="样式美化" tabindex="-1"><a class="header-anchor" href="#样式美化" aria-hidden="true">#</a> 样式美化</h2>`,2),on={href:"https://docsearch.algolia.com/docs/styling/",target:"_blank",rel:"noopener noreferrer"},cn=e(`<p>如果你不懂方法，<a href="./beautification">可以参照样式美化的方法</a></p><div class="language-css line-numbers-mode" data-ext="css"><pre class="language-css"><code><span class="token selector">:root</span> <span class="token punctuation">{</span>
  <span class="token property">--docsearch-primary-color</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>84<span class="token punctuation">,</span> 104<span class="token punctuation">,</span> 255<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">--docsearch-text-color</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>28<span class="token punctuation">,</span> 30<span class="token punctuation">,</span> 33<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">--docsearch-spacing</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>
  <span class="token property">--docsearch-icon-stroke-width</span><span class="token punctuation">:</span> 1.4<span class="token punctuation">;</span>
  <span class="token property">--docsearch-highlight-color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--docsearch-primary-color<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">--docsearch-muted-color</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>150<span class="token punctuation">,</span> 159<span class="token punctuation">,</span> 175<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">--docsearch-container-background</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>101<span class="token punctuation">,</span> 108<span class="token punctuation">,</span> 133<span class="token punctuation">,</span> 0.8<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">--docsearch-logo-color</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>84<span class="token punctuation">,</span> 104<span class="token punctuation">,</span> 255<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">/* modal */</span>
  <span class="token property">--docsearch-modal-width</span><span class="token punctuation">:</span> 560px<span class="token punctuation">;</span>
  <span class="token property">--docsearch-modal-height</span><span class="token punctuation">:</span> 600px<span class="token punctuation">;</span>
  <span class="token property">--docsearch-modal-background</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>245<span class="token punctuation">,</span> 246<span class="token punctuation">,</span> 247<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">--docsearch-modal-shadow</span><span class="token punctuation">:</span> inset 1px 1px 0 0 <span class="token function">rgba</span><span class="token punctuation">(</span>255<span class="token punctuation">,</span> 255<span class="token punctuation">,</span> 255<span class="token punctuation">,</span> 0.5<span class="token punctuation">)</span><span class="token punctuation">,</span> 0 3px
      8px 0 <span class="token function">rgba</span><span class="token punctuation">(</span>85<span class="token punctuation">,</span> 90<span class="token punctuation">,</span> 100<span class="token punctuation">,</span> 1<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">/* searchbox */</span>
  <span class="token property">--docsearch-searchbox-height</span><span class="token punctuation">:</span> 56px<span class="token punctuation">;</span>
  <span class="token property">--docsearch-searchbox-background</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>235<span class="token punctuation">,</span> 237<span class="token punctuation">,</span> 240<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">--docsearch-searchbox-focus-background</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
  <span class="token property">--docsearch-searchbox-shadow</span><span class="token punctuation">:</span> inset 0 0 0 2px <span class="token function">var</span><span class="token punctuation">(</span>--docsearch-primary-color<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">/* hit */</span>
  <span class="token property">--docsearch-hit-height</span><span class="token punctuation">:</span> 56px<span class="token punctuation">;</span>
  <span class="token property">--docsearch-hit-color</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>68<span class="token punctuation">,</span> 73<span class="token punctuation">,</span> 80<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">--docsearch-hit-active-color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
  <span class="token property">--docsearch-hit-background</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
  <span class="token property">--docsearch-hit-shadow</span><span class="token punctuation">:</span> 0 1px 3px 0 <span class="token function">rgb</span><span class="token punctuation">(</span>212<span class="token punctuation">,</span> 217<span class="token punctuation">,</span> 225<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">/* key */</span>
  <span class="token property">--docsearch-key-gradient</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>
    -225deg<span class="token punctuation">,</span>
    <span class="token function">rgb</span><span class="token punctuation">(</span>213<span class="token punctuation">,</span> 219<span class="token punctuation">,</span> 228<span class="token punctuation">)</span> 0%<span class="token punctuation">,</span>
    <span class="token function">rgb</span><span class="token punctuation">(</span>248<span class="token punctuation">,</span> 248<span class="token punctuation">,</span> 248<span class="token punctuation">)</span> 100%
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">--docsearch-key-shadow</span><span class="token punctuation">:</span> inset 0 -2px 0 0 <span class="token function">rgb</span><span class="token punctuation">(</span>205<span class="token punctuation">,</span> 205<span class="token punctuation">,</span> 230<span class="token punctuation">)</span><span class="token punctuation">,</span> inset 0 0 1px 1px
      #fff<span class="token punctuation">,</span> 0 1px 2px 1px <span class="token function">rgba</span><span class="token punctuation">(</span>30<span class="token punctuation">,</span> 35<span class="token punctuation">,</span> 90<span class="token punctuation">,</span> 0.4<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">/* footer */</span>
  <span class="token property">--docsearch-footer-height</span><span class="token punctuation">:</span> 44px<span class="token punctuation">;</span>
  <span class="token property">--docsearch-footer-background</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
  <span class="token property">--docsearch-footer-shadow</span><span class="token punctuation">:</span> 0 -1px 0 0 <span class="token function">rgb</span><span class="token punctuation">(</span>224<span class="token punctuation">,</span> 227<span class="token punctuation">,</span> 232<span class="token punctuation">)</span><span class="token punctuation">,</span> 0 -3px 6px 0 <span class="token function">rgba</span><span class="token punctuation">(</span>69<span class="token punctuation">,</span> 98<span class="token punctuation">,</span> 155<span class="token punctuation">,</span> 0.12<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,2);function ln(un,rn){const o=c("CodeGroupItem"),i=c("CodeGroup"),t=c("ExternalLinkIcon");return d(),v("div",null,[ds,a(i,null,{default:p(()=>[a(o,{title:"pnpm"},{default:p(()=>[vs]),_:1}),a(o,{title:"yarn"},{default:p(()=>[ks]),_:1}),a(o,{title:"npm"},{default:p(()=>[ms]),_:1})]),_:1}),bs,s("p",null,[n("DocSearch官网："),s("a",hs,[n("https://docsearch.algolia.com/"),a(t)])]),gs,s("p",null,[n("通过邀请链接注册并登录进"),s("a",qs,[n("Algolia官网"),a(t)]),n("，点 "),_s,n(" - "),fs]),ys,s("p",null,[n("登录官方爬虫后台进行调试："),s("a",xs,[n("https://crawler.algolia.com/"),a(t)])]),As,s("div",Is,[ws,s("p",null,[n("如果还是不行，就对照 "),s("a",Ps,[n("vuepress文档"),a(t)]),n(" 挨个试")]),Es]),Cs,s("p",null,[s("a",js,[n("Algolia官网"),a(t)]),n(" 注册并登录账号")]),Ds,s("p",null,[n("我用了 "),s("a",Ns,[n("虚拟机"),a(t)]),n(" 安装了 "),s("a",Os,[n("docker"),a(t)]),n("，进 "),s("a",Ks,[n("宝塔"),a(t)]),n(" 根目录 "),Ss,n("文件夹")]),Fs,s("p",null,[n("安装 "),s("a",Ts,[n("jq"),a(t)]),n(" 一款json解析工具")]),Gs,s("div",Bs,[Ls,Ys,s("p",null,[n("于是对照着 "),s("a",$s,[n("algolia官方旧文档"),a(t)]),n(" 挨个试")]),Rs]),Vs,a(i,null,{default:p(()=>[a(o,{title:"发布后触发"},{default:p(()=>[zs]),_:1}),a(o,{title:"提交后触发"},{default:p(()=>[Ms]),_:1}),a(o,{title:"定时触发"},{default:p(()=>[Us]),_:1}),a(o,{title:"手动触发"},{default:p(()=>[Hs]),_:1})]),_:1}),Xs,s("div",Js,[Qs,s("p",null,[n("APPLICATION_ID是 "),s("a",Ws,[n("algolia"),a(t)]),n(" 的 "),Zs]),s("p",null,[n("API_KEY是 "),s("a",sn,[n("algolia"),a(t)]),n(" 的 "),nn]),an]),tn,s("p",null,[n("找到了一个 "),s("a",en,[n("相对完善的解答：@How to setup Algolia DocSearch"),a(t)]),n(" ，但是依然没搞定，这个放在以后弄吧")]),pn,s("p",null,[n("你可以通过 "),s("a",on,[n("@docsearch/css"),a(t)]),n(" 提供的 CSS 变量来自定义样式")]),cn])}const kn=r(rs,[["render",ln],["__file","docSearch.html.vue"]]);export{kn as default};
